# CharacterVerse-AI

## Explanation
è¯¥é¡¹ç›®ä¸ºä¸ƒç‰›äº‘æ¯”èµ›é¡¹ç›®ï¼Œè®®é¢˜äºŒã€‚

## Question
å¼€å‘ä¸€ä¸ªåˆ©ç”¨ AI æ¥åšè§’è‰²æ‰®æ¼”çš„ç½‘ç«™ï¼Œç”¨æˆ·å¯ä»¥æœç´¢è‡ªå·±æ„Ÿå…´è¶£çš„è§’è‰²ä¾‹å¦‚å“ˆåˆ©æ³¢ç‰¹ã€è‹æ ¼æ‹‰åº•ç­‰å¹¶å¯ä¸å…¶è¿›è¡Œè¯­éŸ³èŠå¤©ã€‚

è¯·å›ç­”ï¼š

1.ä½ è®¡åˆ’å°†è¿™ä¸ªåº”ç”¨é¢å‘ä»€ä¹ˆç±»å‹çš„ç”¨æˆ·ï¼Ÿè¿™äº›ç±»å‹çš„ç”¨æˆ·ä»–ä»¬é¢ä¸´ä»€ä¹ˆæ ·çš„ç—›ç‚¹ï¼Œä½ è®¾æƒ³çš„ç”¨æˆ·æ•…äº‹æ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ

2.ä½ è®¤ä¸ºè¿™ä¸ª APP éœ€è¦å“ªäº›åŠŸèƒ½ï¼Ÿè¿™äº›åŠŸèƒ½å„è‡ªçš„ä¼˜å…ˆçº§æ˜¯ä»€ä¹ˆï¼Ÿä½ è®¡åˆ’æœ¬æ¬¡å¼€å‘å“ªäº›åŠŸèƒ½ï¼Ÿ

3.ä½ è®¡åˆ’é‡‡çº³å“ªå®¶å…¬å¸çš„å“ªä¸ª LLM æ¨¡å‹èƒ½åŠ›ï¼Ÿä½ å¯¹æ¯”äº†å“ªäº›ï¼Œä½ ä¸ºä»€ä¹ˆé€‰æ‹©ç”¨è¯¥ LLM æ¨¡å‹ï¼Ÿ

4.ä½ æœŸæœ› AI è§’è‰²é™¤äº†è¯­éŸ³èŠå¤©å¤–è¿˜åº”è¯¥æœ‰å“ªäº›æŠ€èƒ½ï¼Ÿ

è¯·å¼€å‘ä»¥ä¸Š APPï¼ŒåŒ…æ‹¬å®ç° 3 ä¸ªä»¥ä¸Š AI è§’è‰²åº”è¯¥å…·å¤‡çš„æŠ€èƒ½ã€‚è¦æ±‚ä¸èƒ½è°ƒç”¨ç¬¬ä¸‰æ–¹çš„ Agent èƒ½åŠ›ï¼Œåªéœ€å…è®¸è°ƒç”¨ LLM æ¨¡å‹ã€è¯­éŸ³è¯†åˆ«ä»¥åŠ TTS èƒ½åŠ›ã€‚é’ˆå¯¹ä»¥ä¸Š 1-4 ç‚¹ï¼Œè¯·æŠŠä½ çš„æ€è€ƒæ•´ç†æˆæ–‡æ¡£ï¼Œä½œä¸ºä½œå“çš„è¯´æ˜ä¸€å¹¶æäº¤ã€‚

## åç«¯é¡¹ç›®å¯åŠ¨ && åç«¯æ•°æ®æµå›¾

åŸºäºGoè¯­è¨€å¼€å‘çš„AIè§’è‰²å¯¹è¯å¹³å°åç«¯æœåŠ¡ï¼Œæä¾›ç”¨æˆ·ç®¡ç†ã€è§’è‰²å¯¹è¯ã€è¯­éŸ³äº¤äº’ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ğŸš€ åŠŸèƒ½ç‰¹æ€§

- RESTful API è®¾è®¡
- JWTé‰´æƒä¸CORSæ”¯æŒ
- è¯­éŸ³åˆæˆï¼ˆTTSï¼‰ä¸è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰æœåŠ¡
- æ”¯æŒMySQL/PostgreSQLæ•°æ®åº“
- å¤šéƒ¨ç½²æ–¹æ¡ˆæ”¯æŒï¼ˆæœ¬åœ°/Dockerï¼‰

### ğŸ“¦ ç¯å¢ƒè¦æ±‚

- Go 1.21+
- MySQL 5.7+ æˆ– PostgreSQL 12+
- Redis
- Docker 20.10+ï¼ˆå¯é€‰ï¼‰
- FFmpegï¼ˆè¯­éŸ³å¤„ç†ä¾èµ–ï¼‰

### âš¡ å¿«é€Ÿå¼€å§‹

```bash
# å…‹éš†é¡¹ç›®
git clone xxx
cd Backend-CharacterVerse

# å®‰è£…ä¾èµ–
go mod tidy

# å¯åŠ¨æœåŠ¡ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
go run main.go
```

### ğŸ”§ é…ç½®è¯´æ˜

å¤åˆ¶`.env.example`åˆ›å»º`.env`æ–‡ä»¶ï¼š

### ğŸ³ Dockeréƒ¨ç½²

```dockerfile
# Dockerfile
FROM golang:1.21-alpine

WORKDIR /app
COPY . .
RUN go mod download && go build -o main .

EXPOSE 8080
CMD ["./main"]
```

```bash
# æ„å»ºé•œåƒ
docker build -t character-verse-backend .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 \
  -e APP_PORT=8080 \
  -e DB_DSN="your_db_connection_string" \
  character-verse-backend
```

### ğŸ“‚ é¡¹ç›®ç»“æ„

```text
Backend-CharacterVerse/
â”œâ”€â”€ api/            # APIå±‚
â”œâ”€â”€ config/         # é…ç½®åŠ è½½
â”œâ”€â”€ database/       # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”œâ”€â”€ model/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ utils/          # å·¥å…·åº“
â”œâ”€â”€ main.go         # å…¥å£æ–‡ä»¶
â””â”€â”€ go.mod          # ä¾èµ–ç®¡ç†
```

**ï¼ˆæ–‡å­—ï¼‰èŠå¤©æ¨¡å—æ„æ€**

ç”¨æˆ· å‘é€æ¶ˆæ¯ç»™ è§’è‰²
å‰ç«¯ -messageï¼ˆç”¨æˆ·idï¼Œè§’è‰²idï¼Œæ¶ˆæ¯ï¼‰> åç«¯ -> ï¼ˆè§’è‰²çš„çŸ¥è¯†åº“ï¼ˆè§’è‰²æè¿°ï¼ˆå­˜åœ¨MySQLè§’è‰²ä¿¡æ¯é‡Œé¢çš„ Description å­—æ®µï¼‰ï¼‰ + message + è§’è‰²èŠå¤©çš„å†å²æ¶ˆæ¯ï¼‰ -> å¤§æ¨¡å‹ ï¼ˆè§’è‰²çš„çŸ¥è¯†åº“ + messageï¼‰ -> åç«¯ -> ï¼ˆå¯¹åº”è§’è‰²çš„çŸ¥è¯†åº“ + message + å¤§æ¨¡å‹ç”Ÿæˆçš„å›å¤ï¼‰ -> å‰ç«¯

**(è¯­éŸ³é€šè¯)èŠå¤©æ¨¡å—æ„æ€**

ç”¨æˆ·è¯´è¯ -> å‰ç«¯è¯­éŸ³è½¬æ–‡å­—ï¼ˆè°ƒç”¨è¯­éŸ³è¯†åˆ«æœåŠ¡ï¼‰-> é˜²æŠ–ï¼ˆä¸è¯´è¯çš„æ—¶å€™å‘é€ä¿¡æ¯ï¼‰-> åç«¯ï¼ˆæ–‡å­—èŠå¤©æ¨¡å—ï¼‰-> message + TTSæœåŠ¡ -> å‰ç«¯ -> ç”¨æˆ·

**è¯­éŸ³é€šè¯æ•°æ®æµï¼ˆæœ€ç»ˆç‰ˆï¼‰ï¼š**

```mermaid
graph LR
    A[ç”¨æˆ·è¯´è¯] --> B(è¯­éŸ³é‡‡é›†)
    B --> C{é™éŸ³æ£€æµ‹}
    C -->|æ˜¯| D[ä¸Šä¼ æœåŠ¡å™¨]
    C -->|å¦| B
    D --> E[[æœ¬åœ°éŸ³é¢‘å­˜å‚¨]]
    E --> F[[ASR]]
    F --> G[[LLMæµå¼å¤„ç†]]
    G --> H[[TTS]]
    H --> I[è¯­éŸ³æ’­æ”¾]
    I --> A

```

## å‰ç«¯é¡¹ç›®å¯åŠ¨ 
### ğŸ—ï¸ é¡¹ç›®æ¦‚è¿°

CharacterVerse-AI æ˜¯ä¸€ä¸ªåŸºäº React 18 + Vite çš„ç°ä»£åŒ– AI è§’è‰²å¯¹è¯å¹³å°ï¼Œæ”¯æŒæ–‡æœ¬èŠå¤©ã€è¯­éŸ³äº¤äº’ã€è§’è‰²ç®¡ç†ç­‰åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

### ğŸ“‹ æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **React 18.3.1** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **Vite 5.4.10** - æé€Ÿæ„å»ºå·¥å…·ï¼Œå¼€å‘ä½“éªŒä¼˜ç§€
- **React Router DOM 6.30.1** - å£°æ˜å¼è·¯ç”±ç®¡ç†

#### UI ç»„ä»¶åº“
- **Ant Design 6.0.0-alpha.3** - ä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€
- **è‡ªå®šä¹‰ CSS å˜é‡ç³»ç»Ÿ** - æ”¯æŒä¸»é¢˜åˆ‡æ¢å’Œä¸ªæ€§åŒ–å®šåˆ¶

#### çŠ¶æ€ç®¡ç†
- **Zustand 5.0.8** - è½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Œç®€å•æ˜“ç”¨
- **æ¨¡å—åŒ– Store è®¾è®¡** - æŒ‰åŠŸèƒ½åŸŸåˆ†ç¦»çŠ¶æ€ç®¡ç†

#### ç½‘ç»œé€šä¿¡
- **Axios 1.12.2** - HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒæ‹¦æˆªå™¨å’Œé”™è¯¯å¤„ç†
- **WebSocket** - å®æ—¶é€šä¿¡ï¼Œæ”¯æŒæµå¼å¯¹è¯

#### éŸ³é¢‘å¤„ç†
- **AudioWorklet API** - é«˜æ€§èƒ½å®æ—¶éŸ³é¢‘å¤„ç†

### ğŸ›ï¸ é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„
```
web/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/            # é¡¹ç›®èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ components/        # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AuthGuard/     # è®¤è¯å®ˆå«
â”‚   â”‚   â”œâ”€â”€ LazyAvatar/    # æ™ºèƒ½å¤´åƒç¼“å­˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginModal/    # ç™»å½•æ¡†
â”‚   â”‚   â”œâ”€â”€ Navigation/    # å¯¼èˆªç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Sidebar/       # ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ ThemeController/ # ä¸»é¢˜æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ UserAvatar/    # ç”¨æˆ·å¤´åƒ
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home/          # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Chat/          # èŠå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ CharacterManagement/ # è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ servers/           # API æœåŠ¡å±‚
â”‚   â”œâ”€â”€ store/             # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â””â”€â”€ Dockerfile            # Docker é…ç½®
```

### #æ ¸å¿ƒæ¶æ„è®¾è®¡

#### 1. åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation  â”‚ â† React Components + Ant Design
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Business     â”‚ â† Custom Hooks + Store (Zustand)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Service     â”‚ â† API Services + WebSocket
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Infrastructureâ”‚ â† Utils + Request + Audio Processing
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. çŠ¶æ€ç®¡ç†æ¶æ„
- **useAuthStore** - ç”¨æˆ·è®¤è¯çŠ¶æ€
- **useThemeStore** - ä¸»é¢˜é…ç½®çŠ¶æ€
- **useChatStore** - èŠå¤©ç›¸å…³çŠ¶æ€
- **useHomeStore** - é¦–é¡µæ•°æ®çŠ¶æ€
- **useCharacterStore** - è§’è‰²ç®¡ç†çŠ¶æ€

#### 3. è·¯ç”±æ¶æ„
- **å£°æ˜å¼è·¯ç”±é…ç½®** - é›†ä¸­ç®¡ç†æ‰€æœ‰è·¯ç”±
- **è·¯ç”±å®ˆå«** - åŸºäºè®¤è¯çŠ¶æ€çš„è®¿é—®æ§åˆ¶
- **æ‡’åŠ è½½** - æŒ‰éœ€åŠ è½½é¡µé¢ç»„ä»¶ï¼Œä¼˜åŒ–æ€§èƒ½

### ğŸš€ å¯åŠ¨æ–¹å¼

### ç¯å¢ƒè¦æ±‚
- **Node.js**: 18.x (æ¨è 18.17.0+)
- **npm**: 9.x+ æˆ– **yarn**: 1.22.x+
- **ç°ä»£æµè§ˆå™¨**: Chrome 66+, Firefox 76+, Safari 14.1+

### æœ¬åœ°å¼€å‘å¯åŠ¨

#### é…ç½®.env
```
# APIåœ°å€
VITE_BASEURL=''
# æ–‡ä»¶ä¸Šä¼ åœ°å€
VITE_UPLOAD_URL=''
# websocketåœ°å€
VITE_WEBSOCKET_URL=''
# å½•éŸ³æ–‡ä»¶æ‰€åœ¨åœ°å€
VITE_UPVOICE_URL=''
```

#### 2. å®‰è£…ä¾èµ–
```bash
cd web
npm install
```

#### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

#### 4. æœ¬åœ°è®¿é—®åº”ç”¨
```
http://localhost:5173
```

### Docker å‰ç«¯æœ¬åœ°éƒ¨ç½²
```
FROM node:18-alpine

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm install

# å¤åˆ¶æºä»£ç 
COPY . .

æš´éœ²ç«¯å£
EXPOSE 5173

å¯åŠ¨å¼€å‘æœåŠ¡å™¨
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "5173"]
```
### âœ¨ é¡¹ç›®äº®ç‚¹

### 1. ğŸ¨ ç°ä»£åŒ– UI/UX è®¾è®¡
- **ä¸ªæ€§åŒ–ä¸»é¢˜** - 8ç§é¢„è®¾ä¸»é¢˜è‰²å½©ï¼Œæ”¯æŒè‡ªå®šä¹‰
- **é«˜çº§äº¤äº’è¯­éŸ³ç»„ä»¶** - ç¬¦åˆç”¨æˆ·ä½¿ç”¨å®¡ç¾


### 2. ğŸ§  å¤´åƒå›¾ç‰‡åŠ è½½ç¼“å­˜ä¼˜åŒ–
- **å›¾ç‰‡ç¼“å­˜ä¼˜åŒ–** - è§£å†³å¤šç»„ä»¶å¹¶å‘è¯·æ±‚åŒä¸€å›¾ç‰‡çš„é—®é¢˜
- **è¯·æ±‚å»é‡æœºåˆ¶** - é¿å…é‡å¤ç½‘ç»œè¯·æ±‚ï¼Œæå‡æ€§èƒ½
- **çŠ¶æ€åŒæ­¥** - å¤šç»„ä»¶é—´å®æ—¶åŒæ­¥ç¼“å­˜çŠ¶æ€

### 3. ğŸ™ï¸ ä¸“ä¸šçº§éŸ³é¢‘å¤„ç†ï¼Œå®ç°è¯­éŸ³å‘é€ï¼Œè¯­éŸ³é€šè¯åŠŸèƒ½
- **AudioWorklet å¼•æ“** - ç‹¬ç«‹çº¿ç¨‹å¤„ç†ï¼Œä¸é˜»å¡ UI
- **å®æ—¶é™å™ª** - é«˜é€šæ»¤æ³¢ + å™ªéŸ³é—¨é™ + åŠ¨æ€å‹ç¼©
- **è¯­éŸ³æ´»åŠ¨æ£€æµ‹** - æ™ºèƒ½è¯†åˆ«æœ‰æ•ˆè¯­éŸ³ç‰‡æ®µ
- **å¤šè®¾å¤‡æ”¯æŒ** - åŠ¨æ€åˆ‡æ¢éŸ³é¢‘è¾“å…¥è®¾å¤‡
- **ä½å»¶è¿Ÿå¤„ç†** - å»¶è¿Ÿä½è‡³ 10msï¼Œæ¥è¿‘ä¸“ä¸šè®¾å¤‡
- **ä¸ºä½•ä½¿ç”¨AudioWorklet** - è¯¦æƒ…å¯è§ DEVREADME.md

### 4. âš¡ æ€§èƒ½ä¼˜åŒ–
- **è™šæ‹Ÿæ»šåŠ¨åŠ è½½å†å²æ¶ˆæ¯** - å¤§åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

### 5. ğŸ› ï¸ å¼€å‘ä½“éªŒï¼Œé…ç½®dockerå·æŒ‚è½½å®ç°å®æ—¶æ›´æ–°
- **å‰åç«¯è”è°ƒ** - ååˆ†æ–¹ä¾¿ï¼Œæ— éœ€é…ç½®ç¯å¢ƒ
- **çƒ­æ¨¡å—æ›¿æ¢** - å¼€å‘æ—¶å®æ—¶æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°
- **ESLint è§„èŒƒ** - ä»£ç è´¨é‡ä¿è¯
 

## Dockeræœ¬åœ°éƒ¨ç½²å¯åŠ¨æ•´ä¸ªé¡¹ç›®
### é…ç½®
å‚è€ƒdocsä¸‹çš„docker-compose.yml
æ–°å»ºä¸€ä¸ªdocker-compose.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹
```
services:
  # MySQLæ•°æ®åº“
  mysql:
    image: mysql:8.0
    container_name: characterverse-mysql
    restart: unless-stopped
    environment:
      MYSQL_ROOT_PASSWORD: 
      MYSQL_DATABASE: 
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - characterverse-network
      
  # RedisæœåŠ¡
  redis:
    image: redis:alpine
    container_name: characterverse-redis
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes
    environment:
      - REDIS_HOST=
      - REDIS_PORT=
      - REDIS_PASSWORD=
      - REDIS_DB=
    networks:
      - characterverse-network
    restart: unless-stopped
    platform: linux/amd64

  # Goåç«¯æœåŠ¡
  backend:
    build:
      context: ../server/Backend-CharacterVerse
      dockerfile: Dockerfile.dev
    container_name: characterverse-backend
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      - ../server/Backend-CharacterVerse:/app
    environment:
      - DB_HOST=
      - DB_PORT=
      - DB_USER=
      - DB_PASSWORD=
      - DB_NAME=
      - JWT_SECRET=
      - QINIU_API_KEY=
      - QINIU_MODEL_NAME=
      - REDIS_HOST=
      - REDIS_PORT=
      - REDIS_PASSWORD=
      - REDIS_DB=
    depends_on:
      - mysql
      - redis
    networks:
      - characterverse-network

  # Reactå‰ç«¯æœåŠ¡
  frontend:
    build:
      context: ../web
      dockerfile: Dockerfile
    container_name: characterverse-frontend
    restart: unless-stopped
    ports:
      - "5173:5173"
    volumes:
      - ../web:/app
      - /app/node_modules
    depends_on:
      - backend
    networks:
      - characterverse-network

volumes:
  mysql_data:
  redis_data:

networks:
  characterverse-network:
    driver: bridge
```

```
cd docs
docker-compose up
```
